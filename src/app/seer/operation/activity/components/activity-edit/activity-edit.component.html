<seer-content-top>
  <button class="btn btn-outline-dark left-button" (click)="handleBackBtnClick()">返回</button>
  <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="handleSaveBtnClick()">保存</button>
</seer-content-top>
<div class="widgets">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <seer-collapse-card cardTitle="活动基本信息" cardClass="with-scroll" [canCollapse]=true>
          <div class="row">
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label for="activityTheme" class="col-sm-4 col-md-2 control-label">活动主题</label>
                <div class="col-sm-8 col-md-10">
                  <input type="text" class="form-control" id="activityTheme" [(ngModel)]="activity.activityTheme" required>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label for="activityTheme" class="col-sm-4 col-md-2 control-label">活动编号</label>
                <div class="col-sm-8 col-md-10">
                  <input type="text" class="form-control" id="activityId" [(ngModel)]="activity.activityId" disabled>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label for="activityType" class="col-sm-4 col-md-2 control-label">关联活动</label>
                <div class="col-sm-8 col-md-10">
                  <input type="text" class="form-control" id="activityType" [(ngModel)]="activity.activityTheme" >
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label for="trigMode" class="col-sm-4 col-md-2 control-label">触发方式</label>
                <div class="col-sm-8 col-md-10" >
                  <select class="form-control" id="trigMode"  [(ngModel)]="activity.trigMode"
                          dict-select
                          [key]="'TRIG_MODE'"
                          [selected]="activity.trigMode"
                          (change)="chooseTrigMode($event.target.value)"
                          [topOption]="{itemid:'',itemName:'请选择'}" required>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6" [hidden]="isInvestMode">
              <div class="row">
                <label for="productCategory" class="col-sm-4 col-md-2 control-label">标的条件</label>
                <div class="col-sm-8 col-md-10" >
                  <select class="form-control" id="productCategory" [(ngModel)]="activity.productCategory"
                          dict-select
                          [key]="'PRODUCT_CATEGORY'"
                          [selected]="activity.productCategory"
                          [topOption]="{itemid:'',itemName:'请选择'}" required>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6" [hidden]="isInvestMode">
              <div class="row">
                <label for="investLimit" class="col-sm-4 col-md-2 control-label">投资条件</label>
                <div class="col-sm-8 col-md-10" >
                  <select class="form-control" id="investLimit" [(ngModel)]="activity.investLimit"
                          dict-select
                          [key]="'INVEST_LIMIT'"
                          [selected]="activity.investLimit"
                          [topOption]="{itemid:'',itemName:'请选择'}" required>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-12 col-lg-6 col-xlg-6" [hidden]="isInvestMode">
              <div class="row">
                <label  class="col-sm-4 col-md-2 control-label">投资金额</label>
                <div class="col-sm-8 col-md-10 group">
                  <div class="col-sm-5">
                    <input type="text" class="form-control"  [(ngModel)]="activity.investAmount1">
                    <span class="unit">元</span>
                  </div>
                  <label class="col-sm-2">至</label>
                  <div class="col-sm-5" style="position: relative">
                    <input type="text" class="form-control"  [(ngModel)]="activity.investAmount2">
                    <span class="unit">元</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6" [hidden]="isInvestMode">
              <div class="row">
                <label  class="col-sm-4 col-md-2 control-label">投资次数</label>
                <div class="col-sm-8 col-md-10 group">
                  <div class="col-sm-5">
                    <input type="text" class="form-control" id="investTimes1" [(ngModel)]="activity.investTimes1">
                    <span class="unit">次</span>
                  </div>
                  <label class="col-sm-2">至</label>
                  <div class="col-sm-5">
                    <input type="text" class="form-control" id="investTimes2" [(ngModel)]="activity.investTimes2">
                    <span class="unit">次</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label  class="col-sm-4 col-md-2 control-label">活动时间</label>
                <div class="col-sm-8 col-md-10 group" >
                  <div class="col-sm-5">
                    <seer-datepicker
                      [(date)]="activity.activityStartTime"
                      [name]="activityStartTime"
                      [dateFormatingRules]="'yyyy-MM-dd'"
                      [readonly]="readonly"
                    >
                    </seer-datepicker>
                  </div>
                  <label class="col-sm-2">至</label>
                  <div class="col-sm-5">
                    <seer-datepicker
                      [(date)]="activity.activityEndTime"
                      [name]="activityEndTime"
                      [dateFormatingRules]="'yyyy-MM-dd'"
                      [readonly]="readonly"
                    >
                    </seer-datepicker>
                  </div>
                </div>

              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label class="col-sm-4 col-md-2 control-label">参加频率</label>
                <div class="col-sm-8 col-md-10 group" >
                  <div class="col-sm-5">
                    <input type="text" class="form-control"  [(ngModel)]="activity.pl1">
                    <span class="unit">次</span>
                  </div>
                  <label class="col-sm-2">/</label>
                  <div class="col-sm-5">
                    <input type="text" class="form-control"  [(ngModel)]="activity.pl2">
                    <span class="unit">天</span>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
              <div class="row">
                <label for="issueTime" class="col-sm-4 col-md-2 control-label">结算方式</label>
                <div class="col-sm-8 col-md-10" >
                  <select class="form-control" id="issueTime" [(ngModel)]="activity.issueTime"
                          dict-select
                          [key]="'ISSUE_TIME'"
                          [selected]="activity.issueTime"
                          [topOption]="{itemid:'',itemName:'请选择'}" required>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12">
              <div class="row">
                <label for="ymlj" class="col-sm-4 col-md-2 col-lg-1 control-label">页面链接</label>
                <div class="col-sm-8 col-md-10 col-lg-11">
                  <input type="text" class="form-control" id="ymlj" [(ngModel)]="activity.ymlj" >
                </div>
              </div>
            </div>
            <div class="form-group col-sm-12">
              <div class="row">
                <label for="remark" class="col-sm-4 col-md-2 col-lg-1 control-label">活动备注</label>
                <div class="col-sm-8 col-md-10 col-lg-11">
                  <input type="text" class="form-control" id="remark" [(ngModel)]="activity.remark" >
                </div>
              </div>
            </div>
          </div>
      </seer-collapse-card>
    </div>
    <div class="col-md-12">
      <seer-collapse-card cardTitle="活动奖励信息" cardClass="with-scroll" [canCollapse]=true >
        <div>
          <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="openAwardsModal(award1)">添加现金红包</button>
          <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="openAwardsModal(award2)">添加返现红包</button>
          <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="openAwardsModal(award3)">添加加息券</button>
          <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="openAwardsModal(award4)">添加实物礼品</button>
          <button class="btn btn-primary left-button" [disabled]="forbidSaveBtn" (click)="openAwardsModal(award5)">添加抽奖券</button>
        </div>
        <seer-table
          [data]="source"
          [titles]="titles"
          [pageNum]="1"
          [pageSize]="10"
          [total]="8"
          [paginationRules]="1"
          [translate]="translate"
          [hideExport]="true"
          [hidePrint]="true"
          [hideRemoveAll]="true"
          [hideColumns]="true"
          [hideAddButton]="true"
          [hideActions]="true"
          [hideCheckbox]="true"
          [hidePagination]="true"
          (notify)="handleSimpleTableNotify($event)"
        ></seer-table>
      </seer-collapse-card>
    </div>
    <div class="col-md-12">
      <seer-collapse-card cardTitle="适用用户" cardClass="with-scroll" [canCollapse]=true >
        <div class="row">
          <div class="form-group col-sm-12 col-md-6 col-lg-6 col-xlg-6">
            <div class="row">
              <label for="activityTheme" class="col-sm-4 col-md-2 control-label">参与用户</label>
              <div class="col-sm-8 col-md-10">
                <select class="form-control"   [(ngModel)]="activity.activityScope"
                        dict-select
                        [key]="'ACTIVITY_SCOPE'"
                        [selected]="activity.activityScope"
                        (change)="openMemberModal($event.target.value,members)"
                        [topOption]="{itemid:'',itemName:'请选择'}" required>
                </select>
              </div>
            </div>
          </div>
        </div>

      </seer-collapse-card>
    </div>
  </div>
</div>
<ng-template #members >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">选择人员</h4>
  </div>
  <div class="modal-body">
    <seer-collapse-card
      cardTitle="人员列表"
      cardClass="with-scroll"
      [headerActions]="cardActions2"
      (notify)="modalChangeCard($event)"
    >
      <seer-filter
        [hasGlobalFilter]="modalhasGlobalFilter"
        [filters]="modalfilters"
        (onSearchBtnClicked)=modalFiltersChanged($event)
        *ngIf="usersType=='members'"
        [formGroupColNum]="formGroupColNum"
      ></seer-filter>
      <seer-table
        [data]="modalUsers"
        [titles]="modalTitles"
        [pageNum]="modalPageInfo.pageNum"
        [pageSize]="modalPageInfo.pageSize"
        [total]="modalPageInfo.total"
        [paginationRules]="0"
        [translate]="translate"
        [hideExport]="true"
        [hidePrint]="true"
        [hideRemoveAll]="true"
        [hideColumns]="true"
        [hideAddButton]="true"
        [hideActions]="true"
        (notify)="modalChangeTable($event)"
        (changePage)="modalPageChange($event)"
      ></seer-table>
    </seer-collapse-card>
  </div>
</ng-template>
<ng-template #award1 >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">添加现金红包</h4>
  </div>
  <div class="modal-body">
      <div class="row">
        <div class="form-group col-sm-12">
          <div class="row">
            <label for="activityTheme" class="col-sm-4 col-md-2 control-label">奖品名称</label>
            <div class="col-sm-8 col-md-10">
              <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <div class="row">
            <label for="activityTheme" class="col-sm-4 col-md-2 control-label">红包金额</label>
            <div class="col-sm-8 col-md-10">
              <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <div class="row">
            <label for="activityTheme" class="col-sm-4 col-md-2 control-label">获奖概率</label>
            <div class="col-sm-8 col-md-10">
              <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <div class="row">
            <label for="activityTheme" class="col-sm-4 col-md-2 control-label">奖品总数</label>
            <div class="col-sm-8 col-md-10">
              <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
            </div>
          </div>
        </div>
      </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sx btn-info" (click)="saveHouse(house)">确定</button>
    <button type="button"  class="btn btn-default" (click)="modalRef.hide()">取消</button>
  </div>
</ng-template>
<ng-template #award2 >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">添加返现红包</h4>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="form-group col-sm-12">
        <div class="row">
          <label for="activityTheme" class="col-sm-4 col-md-2 control-label">奖品名称</label>
          <div class="col-sm-8 col-md-10">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12">
        <div class="row">
          <label for="activityTheme" class="col-sm-4 col-md-2 control-label">红包金额</label>
          <div class="col-sm-8 col-md-10">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6" >
        <div class="row">
          <label for="productCategory" class="col-sm-4  control-label">适用产品</label>
          <div class="col-sm-8" >
            <select class="form-control"  [(ngModel)]="activity.productCategory"
                    dict-select
                    [key]="'PRODUCT_CATEGORY'"
                    [selected]="activity.productCategory"
                    [topOption]="{itemid:'',itemName:'请选择'}" required>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6" >
        <div class="row">
          <label for="productCategory" class="col-sm-4  control-label">激活方式</label>
          <div class="col-sm-8" >
            <select class="form-control"  [(ngModel)]="activity.useLimit"
                    dict-select
                    [key]="'USE_LIMIT'"
                    [selected]="activity.useLimit"
                    [topOption]="{itemid:'',itemName:'请选择'}" required>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6">
        <div class="row">
          <label for="activityTheme" class="col-sm-4  control-label">启用限额</label>
          <div class="col-sm-8">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6">
        <div class="row">
          <label for="activityTheme" class="col-sm-4  control-label">有效期限</label>
          <div class="col-sm-8">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6" >
        <div class="row">
          <label for="productCategory" class="col-sm-4  control-label">叠加限制</label>
          <div class="col-sm-8" >
            <select class="form-control"  [(ngModel)]="activity.isStacking"
                    dict-select
                    [key]="'IS_STACKING'"
                    [selected]="activity.isStacking"
                    [topOption]="{itemid:'',itemName:'请选择'}" required>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12 col-lg-6">
        <div class="row">
          <label for="activityTheme" class="col-sm-4 control-label">获奖概率</label>
          <div class="col-sm-8">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-12 col-md-12">
        <div class="row">
          <label for="activityTheme" class="col-sm-4 col-md-2 control-label">奖品总数</label>
          <div class="col-sm-8 col-md-10">
            <input type="text" class="form-control"  [(ngModel)]="activity.jpmc" required>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sx btn-info" (click)="saveHouse(house)">确定</button>
    <button type="button"  class="btn btn-default" (click)="modalRef.hide()">取消</button>
  </div>
</ng-template>
<ng-template #award3 >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">添加加息券</h4>
  </div>
  <div class="modal-body">
    123
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sx btn-info" (click)="saveHouse(house)">确定</button>
    <button type="button"  class="btn btn-default" (click)="modalRef.hide()">取消</button>
  </div>
</ng-template>
<ng-template #award4 >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">添加实物礼品</h4>
  </div>
  <div class="modal-body">
    123
  </div>
</ng-template>
<ng-template #award5 >
  <div class="modal-header" style="border-bottom:2px solid #00abff;padding:5px 0; ">
    <h4 class="modal-title pull-left" style="height:40px; line-height:40px; float:left; text-indent:1em;">添加抽奖券</h4>
  </div>
  <div class="modal-body">
    12
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sx btn-info" (click)="saveHouse(house)">确定</button>
    <button type="button"  class="btn btn-default" (click)="modalRef.hide()">取消</button>
  </div>
</ng-template>
